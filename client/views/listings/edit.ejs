<% layout("/layouts/boilerplate") %>

    <div class="row">

        <div class="col-8 offset-2 head-edit-listing">
            <h2>Edit your listing</h2>
            <h6 class="opacity-50">Update your property details and photos</h6>
        </div>

        <div class="col-8 offset-2 cs-bd mt-3 p-3">
            <form method="post" action="/listings/<%=updateListing._id%>?_method=put" novalidate
                class="needs-validation" enctype="multipart/form-data">

                <div>
                    <label for="title" class="form-label"><b>Title</b></label>
                    <input type="text" class="form-control" placeholder="Enter Title" value="<%=updateListing.title%>"
                        name="listing[title]" required />
                    <div class="valid-feedback">Title looks good!</div>
                    <div class="invalid-feedback">Enter a valid title</div>
                </div>
                <br>

                <div>
                    <label for="description" class="form-label"><b>Description</b></label>
                    <textarea class="form-control" placeholder="Enter description" name="listing[description]"
                        required><%=updateListing.description%></textarea>
                    <div class="valid-feedback">Description looks good!</div>
                    <div class="invalid-feedback">Enter a valid description</div>
                </div>
                <br>

                <div class="edit-img">
                    <label for="image" class="form-label"><b>Image</b></label><br>
                    <img src="<%= updateListing.image.url %>" class="img-preview" alt="listing-image">
                </div>
                <br>

                <div>
                    <label for="image" class="form-label"><b>Change image</b></label>
                    <input class="form-control" type="file" name="listing[image]" />
                </div>
                <br>

                <div>
                    <label for="price" class="form-label"><b>Price</b></label>
                    <input class="form-control" type="number" placeholder="Enter Price" value="<%=updateListing.price%>"
                        name="listing[price]" required />
                    <div class="valid-feedback">Price looks good!</div>
                    <div class="invalid-feedback">Enter a valid price</div>
                </div>
                <br>

                <div class="row">
                    <div class="col-8">
                        <label for="location" class="form-label"><b>Location</b></label>
                        <input class="form-control" type="text" placeholder="Enter Location"
                            value="<%=updateListing.location%>" name="listing[location]" required />
                        <div class="valid-feedback">Location looks good!</div>
                        <div class="invalid-feedback">Enter a valid location</div>
                    </div>
                    <div class="col-4">
                        <label for="country" class="form-label"><b>Country</b></label>
                        <input class="form-control" type="text" placeholder="Enter Country"
                            value="<%=updateListing.country%>" name="listing[country]" required />
                        <div class="valid-feedback">Country looks good!</div>
                        <div class="invalid-feedback">Enter a valid country</div>
                    </div>
                </div>
                <br>

                <div class="mb-3">
                    <label for="category" class="form-label"><b>Category</b></label>
                    <div class="row">
                        <% const allCategories=[ { name: "Rooms" , icon: "fa-bed" }, { name: "Farms" ,
                            icon: "fa-tractor" }, { name: "Iconic cities" , icon: "fa-mountain-city" }, { name: "Beach"
                            , icon: "fa-umbrella-beach" }, { name: "Greenry" , icon: "fa-tree" }, {
                            name: "Amazing pools" , icon: "fa-person-swimming" }, { name: "Snow city" , icon: "fa-igloo"
                            }, { name: "Mountain" , icon: "fa-mountain-sun" }, { name: "Camping" , icon: "fa-tent" }, {
                            name: "Sailing" , icon: "fa-sailboat" }, { name: "Hiking" , icon: "fa-person-hiking" } ]; %>

                            <% allCategories.forEach(cat=> { %>
                                <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-2">
                                    <label class="category-pill w-100">
                                        <input type="checkbox" name="listing[category]" value="<%= cat.name %>" hidden
                                            <% if (updateListing.category.includes(cat.name)) { %> checked <% } %>>
                                            <i class="fa-solid <%= cat.icon %> me-2"></i>
                                            <%= cat.name %>
                                    </label>
                                </div>
                                <% }) %>
                    </div>
                </div>
                <br>

                <div class="d-flex ms-auto">
                    <button type="button" onclick="history.back()"
                        class="cs-btn border border-1 text-black bg-white m-2">Cancel</button>
                    <button type="submit" class="cs-btn m-2">
                        Update Listing
                    </button>
                </div>
                <br>

            </form>
        </div>
    </div>
    <br>


    